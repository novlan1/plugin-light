(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{306:function(a,s,e){"use strict";e.r(s);var t=e(14),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"贡献指南"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#贡献指南"}},[a._v("#")]),a._v(" 贡献指南")]),a._v(" "),e("p",[e("code",[a._v("plugin-light")]),a._v(" 采用 "),e("code",[a._v("pnpm monorepo")]),a._v(" 模式，灵感来自于 Vue3 和 Vite 项目。")]),a._v(" "),e("p",[a._v("开发前需对 "),e("code",[a._v("pnpm")]),a._v(" 常用命令有基本了解。")]),a._v(" "),e("h2",{attrs:{id:"打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),e("p",[a._v("以 "),e("code",[a._v("project-config-vite")]),a._v(" 为例：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--filter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("@plugin-light/project-config-vite build\n")])])]),e("p",[a._v("升级依赖")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在某个包中升级 一些依赖")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--filter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("@plugin-light/project-config-vite up "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@plugin-light/*"')]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在所有包中只升级 某个依赖")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--filter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./packages/*"')]),a._v(" up "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@plugin-light/shared-vue2"')]),a._v("\n")])])]),e("h2",{attrs:{id:"文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[a._v("#")]),a._v(" 文档")]),a._v(" "),e("p",[a._v("根据"),e("code",[a._v("jsdoc")]),a._v("生成文档：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run docs:gen\n")])])]),e("p",[a._v("文档开发：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run docs:dev\n")])])]),e("p",[a._v("文档打包：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run docs:build\n")])])]),e("p",[a._v("文档部署：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run docs:deploy\n")])])]),e("h2",{attrs:{id:"monorepo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#monorepo"}},[a._v("#")]),a._v(" monorepo")]),a._v(" "),e("h3",{attrs:{id:"shared"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shared"}},[a._v("#")]),a._v(" shared")]),a._v(" "),e("p",[e("code",[a._v("shared")]),a._v(" 为 Vue2 和 Vue3 公用的。")]),a._v(" "),e("p",[e("code",[a._v("shared-vue2")]),a._v(" 为 Vue2 独有的，可能会用到 "),e("code",[a._v("loader-utils")]),a._v("、"),e("code",[a._v("vue-template-compiler")]),a._v(" 等库。")]),a._v(" "),e("p",[a._v("这样拆离是为了防止依赖版本冲突。")]),a._v(" "),e("h3",{attrs:{id:"依赖关系"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#依赖关系"}},[a._v("#")]),a._v(" 依赖关系")]),a._v(" "),e("p",[e("code",[a._v("loader")]),a._v("、"),e("code",[a._v("plugin")]),a._v(" 之间不能互相依赖，"),e("code",[a._v("project-config")]),a._v(" 之间也是。如果有公用部分，请抽离到 "),e("code",[a._v("shared")]),a._v(" 中。")]),a._v(" "),e("p",[e("code",[a._v("shared")]),a._v("、"),e("code",[a._v("loader/plugin")]),a._v("、"),e("code",[a._v("project-config")]),a._v(" 依赖关系如下：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("project-config\n  / "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\nloader、plugin\n  / "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\nshared\n\n")])])]),e("h3",{attrs:{id:"loader-导出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader-导出"}},[a._v("#")]),a._v(" loader 导出")]),a._v(" "),e("p",[a._v("每个 "),e("code",[a._v("loader")]),a._v(" 有 3 个产物，外部可以使用。")]),a._v(" "),e("ol",[e("li",[a._v("index.js")]),a._v(" "),e("li",[a._v("loader.js")]),a._v(" "),e("li",[a._v("loader.prod.js")])]),a._v(" "),e("p",[e("code",[a._v("index.js")]),a._v(" 是具名导出，包含 "),e("code",[a._v("LOADER")]),a._v("、"),e("code",[a._v("LOADER_PROD")]),a._v(" 两个变量，分别对应 "),e("code",[a._v("loader.js")]),a._v("、"),e("code",[a._v("loader.prod.js")]),a._v(" 的文件路径，并导出 "),e("code",[a._v("loader")]),a._v(" 的 "),e("code",[a._v("types")]),a._v("。")]),a._v(" "),e("p",[e("code",[a._v("loader.js")]),a._v(" 和 "),e("code",[a._v("loader.prod.js")]),a._v(" 分别是 "),e("code",[a._v("loader")]),a._v(" 的非压缩版本和压缩版本。")]),a._v(" "),e("p",[a._v("另外，"),e("code",[a._v("webpack-loader-publish")]),a._v(" 虽然不是 "),e("code",[a._v("loader")]),a._v("，但是为了方便管理和维护，采用了与 "),e("code",[a._v("loader")]),a._v(" 一致的导出模式。")])])}),[],!1,null,null,null);s.default=r.exports}}]);